<div class="shopping-cart">
  <div class="cart-items">
    <h2>Detalles pedido ğŸ“ƒ</h2>

    <p-progressBar mode="indeterminate" *ngIf="cargandoPedido" />

    <p>{{ cantidadTotalProductos }} productos</p>

    <div class="item" *ngFor="let productoPedido of venta?.productosPedido">
      <img src="{{ productoPedido.stock?.receta?.imagen }}" alt="producto {{ productoPedido.stock?.receta?.nombre }}" />
      <div class="item-details">
        <span>{{ productoPedido.stock?.receta?.nombre }}</span>
        <span>{{ productoPedido.stock?.receta?.especificaciones }}</span>
        <span>Paquete de {{ productoPedido.pack }}</span>
      </div>
      <span class="price">{{ productoPedido.costoUnitario | currency: "MXN" }} c/u</span>
      <div class="quantity">
        <input type="text" class="disabled" value="{{ productoPedido.cantidad }}" disabled />
      </div>
      <span class="price">
        {{ productoPedido.montoVenta | currency: "MXN" }}
      </span>
    </div>

    <a [routerLink]="['/cerverica/pedidos']" class="back-to-shop">â† Regresar pedidos</a>
  </div>

  <div class="summary">
    <h2>Resumen ğŸ’²</h2>
    <div class="summary-item">
      <span class="titulo-summary">Subtotal cervezas</span>
      <span>{{ totalPrecioCervezas | currency: "MXN" }}</span>
    </div>
    <div class="summary-item">
      <span class="titulo-summary">Envio</span>

      <span [ngSwitch]="venta?.metodoEnvio">
        <ng-container *ngSwitchCase="1">Reco. Tienda ğŸ­</ng-container>
        <ng-container *ngSwitchCase="2">Envio domicilio ğŸšš</ng-container>
        <ng-container *ngSwitchDefault>MÃ©todo envio no reconocido</ng-container>
      </span>
    </div>

    <div class="summary-item">
      <span class="titulo-summary">MÃ©todo pago</span>

      <span [ngSwitch]="venta?.metodoPago">
        <ng-container *ngSwitchCase="1">Contraentrega ğŸ’µ</ng-container>
        <ng-container *ngSwitchCase="2">Tarjeta {{ obtenerUltimosCuatroDigitosTarjeta() }}ğŸ’³</ng-container>
        <ng-container *ngSwitchCase="3">Stripe ğŸ’³</ng-container>
        <ng-container *ngSwitchCase="4">Plazos</ng-container>
        <ng-container *ngSwitchDefault>MÃ©todo pago no reconocido</ng-container>
      </span>
    </div>

    <div class="summary-item">
      <span class="titulo-summary">Estatus</span>

      <span [ngSwitch]="venta?.estatusVenta">
        <ng-container *ngSwitchCase="1">Recibido âœ…</ng-container>
        <ng-container *ngSwitchCase="2">Empaquetando ğŸ“¦</ng-container>
        <ng-container *ngSwitchCase="3">Listo ğŸšš</ng-container>
        <ng-container *ngSwitchDefault>Estatus venta no reconocido</ng-container>
      </span>
    </div>

    <div class="mensajes-error" #mensajesErrorMetodoPago></div>

    <div *ngIf="venta?.cupon" class="mb-5">
      <span class="m-0 titulo-summary">Detalles del cupÃ³n</span>
      <div class="flex justify-content-between">
        <p><strong>CÃ³digo:</strong> {{ venta?.cupon?.codigo }}</p>
        <p><strong>Descuento: </strong> <span class="descuento">{{ venta?.cupon?.tipo == 1 ? "%" + venta?.cupon?.valor : venta?.cupon?.valor | currency
          : "MXN" }}</span></p>
      </div>
    </div>

    <div class="summary-item total">
      <span>PRECIO TOTAL</span>
      <span [ngClass]="{'tachado': venta?.cupon !== null}">{{ totalPrecioCervezas | currency : "MXN" }}</span>
    </div>

    <div *ngIf="venta?.cupon" class="summary-item total">
      <span>PRECIO CON DESCUENTO</span>
      <span>{{ calcularPrecioConDescuento() | currency : "MXN" }}</span>
    </div>
  </div>
</div>